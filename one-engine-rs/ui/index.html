<!doctype html><meta charset=utf-8><title>Bits HUD</title>
<style>body{font:14px system-ui;margin:24px} .card{border:1px solid #e5e5e5;border-radius:12px;padding:12px;margin:8px 0}
.badge{padding:2px 8px;border-radius:999px;border:1px solid #ddd;margin-right:6px}
.ok{background:#eaffea}.warn{background:#fff7e6}.err{background:#ffeaea}</style>
<h1>Runs</h1><div id="list"></div>
<script>
const b=(v,k)=>`<span class="badge ${k==='e'||k==='d'? (v? 'err':'ok') : (v>0.75?'ok':v>0.5?'warn':'')}">${k}:${typeof v==='number'?v.toFixed?.(2)??v:v}</span>`;
(async function(){
  const r=await fetch('/episodes'); const j=await r.json();
  document.getElementById('list').innerHTML=j.episodes.slice(-20).reverse().map(e=>{
    const bits=e.bits||e.summary?.bits||{};
    return `<div class=card>
      <div><strong>${e.goal||e.episode_id}</strong> <small>${e.started_at||''}</small></div>
      <div>${Object.entries(bits).map(([k,v])=>b(v,k)).join('')}</div>
    </div>`;
  }).join('');
})();
</script>
